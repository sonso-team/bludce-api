package org.sonso.bludceapi.config.properties

object GigachatPrompts {
    fun receiptOcrToJsonPosition(ocrText: String) = """
        Ты — помощник, который обрабатывает текст, распознанный с фотографии кассового чека.

        Ниже — текст, распознанный OCR. В нём перечислены блюда или товары с указанием количества и суммы. 
        Некоторые строки могут содержать служебную информацию: например, слова "ИТОГ", "СУММА", "ОПЛАТА", "VISA", "СПАСИБО", имя официанта, QR-код — такие строки необходимо **исключить** из результата.

        Твоя задача:
        1. Найди все строки, которые содержат **позиции заказа**: название, количество (если есть) и итоговую цену.
        2. Верни результат в виде **валидного JSON-массива**. Каждый объект должен быть в формате:

        {
          "name": "название блюда",
          "quantity": целое число (если не указано или <= 0, то считать равным 1),
          "price": вещественное число (в рублях)
        }

        !!! Очень важно:
        - Не пиши никаких комментариев внутри JSON (например, `//` или `/* */`) — только чистый JSON.
        - Не пиши поясняющий текст до или после — только JSON.
        - Если в строке указано два числа, первое — это количество (например, "2 578,00"), а второе — итоговая сумма.
        - Если количество и цена перепутаны, и одно из чисел больше 100, то это, скорее всего, цена.
        - Если сомневаешься между двумя числами, выбери меньшее как `quantity`, большее — как `price`.
        - quantity не может быть больше 8 — если значение больше, то заменить на 8.

        Исключить из результата строки, содержащие:
        - служебную информацию: "ИТОГО", "сумма заказов", "менеджер", "счёт", "открыт", "официант", "стол", "заказ", "отзывы", "QR", "наличные", "безналичные", "спасибо", "печати"
        - строки без чисел

        Вот текст чека:
        $ocrText
    """.trimIndent()
}
